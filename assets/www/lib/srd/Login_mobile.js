//>>built
define("srd/Login_mobile","dojo/_base/declare,dojo,dojox,dojo/parser,dojo/_base/connect,srd/Login,dojox/mobile/Heading,dojo/domReady!".split(","),function(d,a,c,e,f,g){return d([g],{constructor:function(){},uiSetup:function(){e.parse();f.subscribe("/dojox/mobile/deleteListItem",function(a){this.showDeleteButton(a)});0<this.myservers.length&&(a.setAttr(a.byId("userbox"),"value",this.myservers[0].username),a.setAttr(a.byId("passbox"),"value",this.myservers[0].password));var b=this;this.optionArr=[];
this.theSelect=a.create("select",{id:"selectbox",srdLogin:this,onchange:function(){b.selectserver(this.options.selectedIndex)}},a.byId("serverListLocation1"));this.theSelect2=new c.mobile.RoundRectList({editable:"true"});this.theSelect2.placeAt(a.byId("serverListLocation2"));for(i=0;i<this.myservers.length;i++)a.create("option",{innerHTML:this.myservers[i].url},this.theSelect),this.theSelect2.addChild(new c.mobile.ListItem({label:this.myservers[i].url,"class":"mbListItem",value:i,srdLogin:this,id:"list2_itemnum_"+
i,clickable:"true",onClick:function(){0==this.srdLogin.deletepressed?(this.srdLogin.selectserver(this.value),dijit.byId("server_view").performTransition("server_data_view",1,"slide",null)):(this.srdLogin.currentservernum=this.value,this.srdLogin.deleteserver())}}));this.theSelect2.startup()},selectserver:function(b){a.setAttr(a.byId("loginfeedback"),"innerHTML","");this.currentservernum=b;0<=b?(a.setAttr(a.byId("userbox"),"value",this.myservers[b].username),a.setAttr(a.byId("passbox"),"value",this.myservers[b].password),
a.setAttr(a.byId("editservername"),"value",this.myservers[b].url),a.setAttr(a.byId("editusername"),"value",this.myservers[b].username),a.setAttr(a.byId("editpassword"),"value",this.myservers[b].password),a.setAttr(a.byId("editcity"),"value",this.myservers[b].city)):(a.setAttr(a.byId("userbox"),"value",""),a.setAttr(a.byId("passbox"),"value",""),a.setAttr(a.byId("editservername"),"value",""),a.setAttr(a.byId("editusername"),"value",""),a.setAttr(a.byId("editpassword"),"value",""),a.setAttr(a.byId("editcity"),
"value",""))},addServer:function(){var b=this.currentservernum;a.create("option",{innerHTML:this.myservers[b].url},this.theSelect);a.byId("selectbox").selectedIndex=b;this.theSelect2.addChild(new c.mobile.ListItem({label:this.myservers[b].url,"class":"mbListItem",value:b,srdLogin:this,id:"list2_itemnum_"+b,clickable:"true",onClick:function(){0==this.srdLogin.deletepressed?(this.srdLogin.selectserver(this.value),dijit.byId("server_view").performTransition("server_data_view",1,"slide",null)):(this.srdLogin.currentservernum=
this.value,this.srdLogin.deleteserver())}}));this.selectserver(b);this.saveserver()},deleteserverprep:function(){if(0==this.deletepressed){for(i=0;i<this.myservers.length;i++)dijit.byId("list2_itemnum_"+i).set("icon","mblDomButtonRedCircleMinus"),dijit.byId("list2_itemnum_"+i).iconNode.style.display="inline",dijit.byId("list2_itemnum_"+i).rightIconNode.style.display="none";dijit.byId("deletebutton").set("style=","background-color: red");dijit.byId("deletebutton").set("label","Cancel");this.deletepressed=
1}else{dijit.byId("deletebutton").set("label","Delete");for(i=0;i<this.myservers.length;i++)dijit.byId("list2_itemnum_"+i).iconNode.style.display="none",dijit.byId("list2_itemnum_"+i).rightIconNode.style.display="inline";this.deletepressed=0}},deleteserver:function(){this.myservers.splice(this.currentservernum,1);a.byId("selectbox").remove(this.currentservernum);a.destroy(this.theSelect);this.theSelect2.destroyRecursive();this.uiSetup();this.deletepressed=0;this.deleteserverprep();this.saveToLocalStorage()},
saveserver:function(){this.myservers[this.currentservernum].url=a.byId("editservername").value;this.myservers[this.currentservernum].city=a.byId("editcity").value;this.myservers[this.currentservernum].username=a.byId("editusername").value;this.myservers[this.currentservernum].password=a.byId("editpassword").value;this.saveToLocalStorage();a.byId("selectbox").options[this.currentservernum].innerHTML=this.myservers[this.currentservernum].url;dijit.byId("list2_itemnum_"+this.currentservernum).set("label",
this.myservers[this.currentservernum].url)},loadSitRepFrame:function(){a.create("iframe",{src:"main_frame.html",style:"border: 0; width: 100%; height: 100%"},a.byId("main_frame_view"));dijit.byId("root_view").performTransition("main_frame_view",1,"fade",null)}})});